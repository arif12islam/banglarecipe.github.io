<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ржЬрзЗржорж┐ржирж┐ ржмрж╛ржВрж▓рж╛ рж░рзЗрж╕рж┐ржкрж┐ | ржЖржкржирж╛рж░ ржкржЫржирзНржжрзЗрж░ рж░рж╛ржирзНржирж╛</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali:wght@300;400;500;700&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body class="antialiased">
    <div class="container-card p-8 rounded-xl shadow-2xl max-w-4xl w-full mx-auto my-8">
        <h1 class="text-5xl font-extrabold text-center header-text mb-4">
            <span class="block">ЁЯН╜я╕П ржмрж╛ржВрж▓рж╛ рж░рзЗрж╕рж┐ржкрж┐ ржЬрзЗржирж╛рж░рзЗржЯрж░ ЁЯНЬ</span>
        </h1>
        <p class="text-center text-gray-600 mb-8 text-lg">
            ржЖржкржирж╛рж░ ржкржЫржирзНржжрзЗрж░ ржЦрж╛ржмрж╛рж░рзЗрж░ ржирж╛ржо рж▓рж┐ржЦрзБржи, ржЬрзЗржорж┐ржирж┐ рждрзИрж░рж┐ ржХрж░ржмрзЗ ржПржХржЯрж┐ рж╕рж╣ржЬ ржУ рж╕рзБрж╕рзНржмрж╛ржжрзБ рж░рзЗрж╕рж┐ржкрж┐!
        </p>

        <div class="flex flex-col md:flex-row gap-4 mb-6">
            <input
                type="text"
                id="recipePrompt"
                placeholder="ржпрзЗржоржи: 'ржЧрж░рзБрж░ ржорж╛ржВрж╕рзЗрж░ ржХрж╛рж▓рж╛ ржнрзБржирж╛', 'ржЗрж▓рж┐рж╢ ржнрж╛ржкрж╛рж░ рж╕рж╣ржЬ рж░рзЗрж╕рж┐ржкрж┐', 'рж▓рж╛ржЙ ржЪрж┐ржВрзЬрж┐'"
                class="flex-grow input-field focus:outline-none focus:ring-2 focus:ring-orange-400"
            >
            <button
                id="generateButton"
                onclick="generateRecipe()"
                class="px-6 py-3 button-primary shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-orange-400 focus:ring-offset-2 transition duration-300 ease-in-out flex items-center justify-center"
            >
                рж░рзЗрж╕рж┐ржкрж┐ рждрзИрж░рж┐ ржХрж░рзБржи
                <div id="loadingSpinner" class="spinner ml-2"></div>
            </button>
        </div>

        <div id="recipeOutput" class="mt-8 recipe-output-card p-6 flex flex-col items-center justify-center text-gray-500 text-center">
            <p class="text-lg">ржЖржкржирж╛рж░ рждрзИрж░рж┐ ржХрж░рж╛ рж╕рзБрж╕рзНржмрж╛ржжрзБ рж░рзЗрж╕рж┐ржкрж┐ ржПржЦрж╛ржирзЗ ржжрзЗржЦрж╛ ржпрж╛ржмрзЗ!</p>
        </div>
    </div>

    <script>
        // ржЬрзЗржорж┐ржирж┐ API ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ рж░рзЗрж╕рж┐ржкрж┐ рждрзИрж░рж┐ ржХрж░рж╛рж░ ржлрж╛ржВрж╢ржи
        async function generateRecipe() {
            const promptInput = document.getElementById('recipePrompt');
            const recipeOutput = document.getElementById('recipeOutput');
            const generateButton = document.getElementById('generateButton');
            const loadingSpinner = document.getElementById('loadingSpinner');

            const prompt = promptInput.value.trim();

            if (!prompt) {
                recipeOutput.innerHTML = '<p class="text-red-600">рж░рзЗрж╕рж┐ржкрж┐ рждрзИрж░рж┐ ржХрж░рждрзЗ ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ ржПржХржЯрж┐ ржЦрж╛ржмрж╛рж░ ржмрж╛ ржЙржкржХрж░ржг рж▓рж┐ржЦрзБржиред</p>';
                return;
            }

            // рж▓рзЛржбрж┐ржВ ржЕржмрж╕рзНржерж╛ ржжрзЗржЦрж╛ржирзЛ
            generateButton.disabled = true;
            generateButton.classList.add('opacity-70', 'cursor-not-allowed');
            loadingSpinner.style.display = 'block';
            recipeOutput.innerHTML = '<p class="text-orange-600 flex items-center justify-center text-lg"><span class="spinner mr-2"></span> ржЖржкржирж╛рж░ рж╕рзБрж╕рзНржмрж╛ржжрзБ рж░рзЗрж╕рж┐ржкрж┐ рждрзИрж░рж┐ рж╣ржЪрзНржЫрзЗ...</p>';
            recipeOutput.classList.remove('text-gray-500'); // ржкрзНрж░рж╛ржержорж┐ржХ ржкрзНрж▓рзЗрж╕рж╣рзЛрж▓рзНржбрж╛рж░ ржЯрзЗржХрзНрж╕ржЯ ржХрж╛рж▓рж╛рж░ рж╕рж░рж╛ржирзЛ

            try {
                // ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзАрж░ ржкрзНрж░ржорзНржкржЯ рж╕рж╣ ржЪрзНржпрж╛ржЯ ржЗрждрж┐рж╣рж╛рж╕ рж╕ржВржЬрзНржЮрж╛ржпрж╝рж┐ржд ржХрж░рж╛
                let chatHistory = [];
                // API-ржХрзЗ ржмрж╛ржВрж▓рж╛рзЯ рж╕ржВржХрзНрж╖рж┐ржкрзНржд рж░рзЗрж╕рж┐ржкрж┐ ржЪрж╛ржЗрждрзЗ ржмрж▓рж╛
                chatHistory.push({ role: "user", parts: [{ text: `"${prompt}"-ржПрж░ ржЬржирзНржп ржПржХржЯрж┐ рж╕ржВржХрзНрж╖рж┐ржкрзНржд ржПржмржВ рж╕рзБрж╕рзНржмрж╛ржжрзБ рж░рзЗрж╕рж┐ржкрж┐ рждрзИрж░рж┐ ржХрж░рзБржиред ржЖржЙржЯржкрзБржЯржЯрж┐ ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд JSON ржлрж░ржорзНржпрж╛ржЯрзЗ ржжрж┐ржи: { "recipeName": "string", "ingredients": ["string"], "instructions": ["string"] }ред ржкрзНрж░рждрж┐ржЯрж┐ ржирж┐рж░рзНржжрзЗрж╢ржирж╛рж░ ржзрж╛ржк ржЦрзБржм рж╕ржВржХрзНрж╖рж┐ржкрзНржд ржПржмржВ рж╕рж░рж╛рж╕рж░рж┐ рж╣ржмрзЗред` }] });

                // API ржЕржирзБрж░рзЛржзрзЗрж░ ржЬржирзНржп ржкрзЗ-рж▓рзЛржб рж╕ржВржЬрзНржЮрж╛ржпрж╝рж┐ржд ржХрж░рж╛, ржХрж╛ржарж╛ржорзЛржЧржд ржкрзНрж░рждрж┐ржХрзНрж░рж┐ржпрж╝рж╛ рж╕рзНржХрж┐ржорж╛ рж╕рж╣
                const payload = {
                    contents: chatHistory,
                    generationConfig: {
                        responseMimeType: "application/json",
                        responseSchema: {
                            type: "OBJECT",
                            properties: {
                                "recipeName": { "type": "STRING" },
                                "ingredients": {
                                    "type": "ARRAY",
                                    "items": { "type": "STRING" }
                                },
                                "instructions": {
                                    "type": "ARRAY",
                                    "items": { "type": "STRING" }
                                }
                            },
                            "propertyOrdering": ["recipeName", "ingredients", "instructions"]
                        },
                        temperature: 0.7 
                    }
                };

               
                const apiKey = "AIzaSyBVVQxYu_0iKhuVOuuRW4rlX8dl8g0ND60";
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                // API ржХрж▓ ржХрж░рж╛
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();

                // ржкрзНрж░рждрж┐ржХрзНрж░рж┐ржпрж╝рж╛ржпрж╝ ржмрзИржз ржмрж┐рж╖ржпрж╝ржмрж╕рзНрждрзБ ржЖржЫрзЗ ржХрж┐ржирж╛ рждрж╛ ржкрж░рзАржХрзНрж╖рж╛ ржХрж░рж╛
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {

                    const jsonText = result.candidates[0].content.parts[0].text;
                    const recipe = JSON.parse(jsonText);

                    // рж░рзЗрж╕рж┐ржкрж┐ ржлрж░ржорзНржпрж╛ржЯ ржХрж░рж╛ ржПржмржВ ржкрзНрж░ржжрж░рзНрж╢ржи ржХрж░рж╛
                    let formattedRecipe = `
                        <h2 class="text-4xl font-bold header-text mb-6 text-center">${recipe.recipeName}</h2>
                        <div class="mb-8 w-full">
                            <h3 class="text-2xl font-semibold section-heading mb-4 text-left">ржЙржкржХрж░ржг:</h3>
                            <ul class="list-disc list-inside text-gray-800 text-lg space-y-2">
                                ${recipe.ingredients.map(item => `<li>${item}</li>`).join('')}
                            </ul>
                        </div>
                        <div class="w-full">
                            <h3 class="text-2xl font-semibold section-heading mb-4 text-left">ржирж┐рж░рзНржжрзЗрж╢рж╛ржмрж▓рзА:</h3>
                            <div class="recipe-grid">
                                ${recipe.instructions.map((step, index) => `
                                    <div class="grid-step">
                                        <span class="step-number">${index + 1}</span>
                                        <p class="text-gray-800 text-base mt-4">${step}</p>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    `;
                    recipeOutput.innerHTML = formattedRecipe;
                    recipeOutput.classList.remove('text-blue-600'); // рж▓рзЛржбрж┐ржВ ржЯрзЗржХрзНрж╕ржЯ ржХрж╛рж▓рж╛рж░ рж╕рж░рж╛ржирзЛ
                    recipeOutput.classList.add('text-left', 'p-6'); // рж░рзЗрж╕рж┐ржкрж┐ ржмрж┐рж╖ржпрж╝ржмрж╕рзНрждрзБрж░ ржЬржирзНржп ржмрж┐ржирзНржпрж╛рж╕ ржПржмржВ ржкрзНржпрж╛ржбрж┐ржВ рж╕рж╛ржоржЮрзНржЬрж╕рзНржп ржХрж░рж╛

                } else {
                    recipeOutput.innerHTML = '<p class="text-red-600 text-lg">рж░рзЗрж╕рж┐ржкрж┐ рждрзИрж░рж┐ ржХрж░рж╛ ржпрж╛ржпрж╝ржирж┐ред ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ ржЕржирзНржп ржПржХржЯрж┐ ржкрзНрж░ржорзНржкржЯ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзБржиред</p>';
                }

            } catch (error) {
                console.error('рж░рзЗрж╕рж┐ржкрж┐ рждрзИрж░рж┐рждрзЗ рждрзНрж░рзБржЯрж┐:', error);
                recipeOutput.innerHTML = `<p class="text-red-600 text-lg">ржПржХржЯрж┐ рждрзНрж░рзБржЯрж┐ ржШржЯрзЗржЫрзЗ: ${error.message}ред ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ ржЖржмрж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзБржиред</p>`;
            } finally {
                // рж▓рзЛржбрж┐ржВ ржЕржмрж╕рзНржерж╛ рж▓рзБржХрж╛ржирзЛ
                generateButton.disabled = false;
                generateButton.classList.remove('opacity-70', 'cursor-not-allowed');
                loadingSpinner.style.display = 'none';
                // ржпржжрж┐ ржкрзНрж░рж╛ржержорж┐ржХ рж▓рзЛржбрж┐ржВ ржмрж╛рж░рзНрждрж╛рж░ ржкрж░рзЗ ржХрзЛржирзЛ рждрзНрж░рзБржЯрж┐ ржШржЯрзЗ ржерж╛ржХрзЗ рждржмрзЗ recipeOutput ржбрж┐ржнржЯрж┐ ржЦрж╛рж▓рж┐ ржирж╛ рж░рж╛ржЦрж╛ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рж╛
                if (recipeOutput.innerHTML.includes('ржЖржкржирж╛рж░ рж╕рзБрж╕рзНржмрж╛ржжрзБ рж░рзЗрж╕рж┐ржкрж┐ рждрзИрж░рж┐ рж╣ржЪрзНржЫрзЗ...')) {
                     recipeOutput.innerHTML = '<p class="text-gray-500 text-lg">ржЖржкржирж╛рж░ рждрзИрж░рж┐ ржХрж░рж╛ рж╕рзБрж╕рзНржмрж╛ржжрзБ рж░рзЗрж╕рж┐ржкрж┐ ржПржЦрж╛ржирзЗ ржжрзЗржЦрж╛ ржпрж╛ржмрзЗ!</p>';
                }
            }
        }
    </script>
</body>
</html>
